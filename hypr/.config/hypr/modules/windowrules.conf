# ███████╗███╗   ██╗███████╗███╗   ███╗██╗   ██╗    ██████╗ ██████╗  ██████╗
# ██╔════╝████╗  ██║██╔════╝████╗ ████║╚██╗ ██╔╝    ██╔══██╗██╔══██╗██╔════╝
# █████╗  ██╔██╗ ██║█████╗  ██╔████╔██║ ╚████╔╝     ██████╔╝██████╔╝██║  ███╗
# ██╔══╝  ██║╚██╗██║██╔══╝  ██║╚██╔╝██║  ╚██╔╝      ██╔══██╗██╔═══╝ ██║   ██║
# ███████╗██║ ╚████║███████╗██║ ╚═╝ ██║   ██║       ██║  ██║██║     ╚██████╔╝
# ╚══════╝╚═╝  ╚═══╝╚══════╝╚═╝     ╚═╝   ╚═╝       ╚═╝  ╚═╝╚═╝      ╚═════╝

# -- Workspace rules -- #

# Define workspaces to monitors (1-5 on main, 6-10 on secondary)
workspace = 1, monitor:DP-1, persistent:true
workspace = 2, monitor:DP-1, persistent:true
workspace = 3, monitor:DP-1, persistent:true
workspace = 4, monitor:DP-1, persistent:true
workspace = 5, monitor:DP-1, persistent:true

workspace = 6, monitor:DP-2, persistent:true
workspace = 7, monitor:DP-2, persistent:true
workspace = 8, monitor:DP-2, persistent:true
workspace = 9, monitor:DP-2, persistent:true
workspace = 10, monitor:DP-2, persistent:true



# -- Window rules -- #

# -- Hyprland default rules

# Ignore maximize requests from all apps. You'll probably like this.
windowrule {
  name = suppress-maximize-events
  match:class = .*

  suppress_event = maximize
}

# Fix some dragging issues with XWayland
windowrule {
  name = fix-xwayland-drags
  match:class = ^$
  match:title = ^$
  match:xwayland = true
  match:float = true
  match:fullscreen = false
  match:pin = false

  no_focus = true
}

# Hyprland-run windowrule
windowrule {
  name = move-hyprland-run

  match:class = hyprland-run

  move = 20 monitor_h-120
  float = yes
}

windowrule {
  name = noblur-popups
  match:class = ^$
  match:title = ^$
  no_blur = true
  opacity = 1.0 override
}


# -- Start applications and lock them to workspaces

# Discord → workspace 6
windowrule = match:class ^discord$, workspace 6 silent

# Steam → workspace 2
windowrule = match:class ^steam$, workspace 2 silent


# -- Windowrules for misc applications

# File picker portals
windowrule {
  name = file-picker-portal
  match:class = (?i)xdg-desktop-portal-(gtk|hyprland)
  float = yes
  center = yes
  size = 1150 650
}

# Kitty terminal
windowrule {
  name = kitty-float
  match:class = ^(kitty-float)$
  float = yes
  size = 1120 549
  move = 395 145
}

# Pavucontrol
windowrule {
  name = pavucontrol
  match:class = ^(org.pulseaudio.pavucontrol)$
  float = yes
  size = 441 818
  move = 1463 50
}

# Blueman
windowrule {
  name = blueman
  match:class = ^(blueman-manager)$
  float = yes
  size = 529 818
  move = 1375 50
}

# Nmtui (kitty)
windowrule {
  name = nmtui-kitty
  match:class = ^(kitty)$
  match:title = ^(nmtui-float)$
  float = yes
  size = 719 720
  move = 1186 50
}

# Mpv
windowrule {
  name = mpv
  match:class = ^(mpv)$
  opacity = 1.0 override
  float = yes
  size = 1250 750
  center = yes
}

# Qimgv
windowrule {
  name = qimgv
  match:class = ^(qimgv)$
  float = yes
  size = 1250 750
  center = yes
}

# Nautilus
windowrule {
  name = nautilus
  match:class = (?i)^org.gnome.Nautilus$
  float = yes
  size = 1200 600
  center = yes
}

# Discord popouts
windowrule {
  name = discord-popouts
  match:initial_title = (?i)^discord popout$
  size = 1350 800
  float = yes
  center = yes
  opacity = 1.0 override
}


# -- Steam specific windowrules

# Default all Steam windows to floating
windowrule {
    name = steam-default-float
    match:class = (?i)^steam$
    float = yes
}

# Override the main Steam window to tiling
windowrule {
    name = steam-main-tile
    match:class = (?i)^steam$
    match:title = ^Steam$
    float = no
}

# Force full opacity (1.0) on all Steam windows
windowrule {
    name = steam-opacity
    match:class = (?i)^steam$
    opacity = 1.0 override
}

# Move steam games to special workspace (games)
windowrule = match:class (?i)^cs2$, workspace special:games
windowrule = match:class (?i)^factorio$, workspace special:games



# -- Layer rules -- #

# -- Blur

# Waybar
layerrule {
  name = waybar-blur
  blur = on
  ignore_alpha = 0.5
  match:namespace = waybar
}

# Swaync control center
layerrule {
  name = swaync-blur-control-center
  blur = on
  ignore_alpha = 0.5
  match:namespace = swaync-control-center
}

# Swaync notifications
layerrule {
  name = swaync-blur-notification
  blur = on
  ignore_alpha = 0.5
  match:namespace = swaync-notification-window
}

# Wlogout
layerrule {
  name = wlogout-blur
  blur = on
  match:namespace = logout_dialog
}